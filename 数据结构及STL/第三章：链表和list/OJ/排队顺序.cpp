//# B3630 排队顺序
//
//## 题目描述
//
//有 $n(2 \le n\le 10^6)$ 个小朋友，他们的编号分别从 $1$ 到 $n$。现在他们排成了一个队伍，每个小朋友只知道他**后面**一位小朋友的编号。现在每个小朋友把他后面是谁告诉你了，同时你还知道排在队首的是哪位小朋友，请你从前到后输出队列中每个小朋友的编号。
//
//## 输入格式
//
//第一行一个整数 $n$，表示小朋友的人数。
//
//第二行 $n$ 个整数，其中第 $i$ 个数表示编号为 $i$ 的小朋友后面的人的编号。如果这个数是 $0$，则说明这个小朋友排在最后一个。
//
//第三行一个整数 $h$，表示排在第一个的小朋友的编号。
//
//## 输出格式
//
//一行 $n$ 个整数，表示这个队伍从前到后所有小朋友的编号，用空格隔开。
//
//## 输入输出样例 #1
//
//### 输入 #1
//
//```
//6
//4 6 0 2 3 5
//1
//```
//
//### 输出 #1
//
//```
//1 4 2 6 5 3
//```

#include <iostream>
using namespace std;

const int N = 1e6 + 10;
int ne[N];

int main()
{
    int n, h;
    cin >> n;
    for(int i = 1; i <= n; i++)
    {
        cin >> ne[i];
    }
    cin >> h;

    for(int i = h; i; i = ne[i])
    {
        cout << i << " ";
    }
    cout << endl;

    return 0;
}
